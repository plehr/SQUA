name: Java CI
on: [push]
jobs:
 build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      - name: Set up JDK 1.8
        uses: actions/setup-java@v1
        with:
          java-version: 1.8
      - name: Build with Maven
        run: mvn --batch-mode --update-snapshots verify
      - name: Run tests with Maven
        run: mvn -B test --file pom.xml
      - name: Coverage
        run: mvn test
      - uses: paambaati/codeclimate-action@v2.2.4
         env:
        CC_TEST_REPORTER_ID: 33591a14dc9c9177b1dc5017141d9fce73e8532810d889a1ead92f991e1bd166
      with:
        coverageCommand: mvn test